{% for child in categories %}
    <div class="accordion-item">
        <h2 class="accordion-header" id="heading{{ child.id }}">
            {% if child.has_children %}
                <button class="accordion-button {% if child.slug == current_slug %}active{% endif %}" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ child.id }}" aria-expanded="{% if child.slug == current_slug %}true{% else %}false{% endif %}">
                    {{ child.name }}
                </button>
            {% else %}
                <a href="{% url 'products:category' child.slug %}" class="accordion-link">
                    {{ child.name }}
                </a>
            {% endif %}
        </h2>

        {% if child.has_children %}
            <div id="collapse{{ child.id }}" class="accordion-collapse collapse {% if child.slug == current_slug %}show{% endif %}" aria-labelledby="heading{{ child.id }}">
                <div class="accordion-body">
                    {% include "products/category_recursive.html" with categories=child.get_sorted_children current_slug=current_slug active_category_id=active_category_id %}
                </div>
            </div>
        {% endif %}
    </div>
{% endfor %}

<!-- Добавляем стили прямо в файл -->
<style>
    /* Стили для аккордеона */
    .accordion-item {
        border: none; /* Убираем границы */
        margin-bottom: 5px; /* Отступ между элементами */
    }

    .accordion-header {
        margin-bottom: 0; /* Убираем отступы под заголовком */
    }

    .accordion-button {
        font-size: 16px; /* Размер текста кнопки */
        background-color: #f8f9fa; /* Фон кнопки */
        border-radius: 5px; /* Скругление углов */
        padding: 10px 15px; /* Отступы внутри кнопки */
        text-align: left; /* Выравнивание текста по левому краю */
    }

    .accordion-button.active {
        background-color: #e0e0e0; /* Изменение цвета для активной кнопки */
    }

    .accordion-link {
        display: block;
        font-size: 16px;
        padding: 10px 15px;
        background-color: #fff; /* Белый фон для ссылок */
        text-decoration: none;
        border-radius: 5px; /* Скругление углов у ссылок */
        color: #000; /* Черный цвет текста */
    }

    .accordion-link:hover {
        background-color: #f1f1f1; /* Фон при наведении */
    }

    .accordion-body {
        padding-left: 20px; /* Отступ для вложенных элементов */
    }

    /* Стили для вложенных элементов */
    .accordion-item .accordion-item {
        margin-top: 0;
        margin-bottom: 0;
    }

    /* Вложенные элементы второго уровня */
    .accordion-body .accordion-item {
        margin-left: 10px; /* Отступ для вложенных категорий */
        background-color: #f1f1f1; /* Светлый фон для вложенных элементов */
    }

    /* Вложенные элементы третьего уровня */
    .accordion-body .accordion-item .accordion-body .accordion-item {
        margin-left: 20px; /* Увеличиваем отступ для еще более вложенных элементов */
        background-color: #e9e9e9; /* Фон для категорий третьего уровня */
    }
</style>
